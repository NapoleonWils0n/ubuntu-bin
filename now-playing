#!/bin/sh

# playercrl + dunst

# metadata
metadata=$(playerctl metadata --format '{{ title }}#Artist: {{ artist }}#Player: {{ playerName }}#Status: {{ status }}#{{ mpris:artUrl }}')

# title
title=$(echo "${metadata}" | cut -d '#' -f 1 --output-delimiter="\n")

# body
body=$(echo "${metadata}" | cut -d '#' -f 2-4 --output-delimiter="\n")

# icon
icon=$(echo "${metadata}" | cut -d '#' -f 5 | sed 's#file://##')

# dunst check for artUrl
if [ -z "${icon}" ]; then
  notify-send "${title}" "${body}" 1>/dev/null
else
  notify-send -i "${icon}" "${title}" "${body}" 1>/dev/null
fi
